<!DOCTYPE html>
<html>
  <head>
    <title>
      Button Game
    </title>
    
    <meta charset="UTF-8" />
    <style media="screen"></style>
    
    <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  </head>
  
  <body>
    <div id="button"></div>
    <div id="score"></div>

    <script type="text/babel">
      class App extends React.Component {

        constructor() {
          super()
          this.state = {'score': 0}
          this.fetchData = this.fetchData.bind(this)

          // Render button
          ReactDOM.render(
            <button onClick={this.fetchData}>Click me</button>,
             document.getElementById('button')
          )
        }

        /* Fetch data and update score */
        async fetchData() {
          console.log('fetchData')
          const data = await fetch('http://localhost:8080/increment').then(data => data.json())
          const str = `You received ${data.pointsWon}
                      clicks needed for next win ${data.neededPressesForWin}`
          this.setState({'score': str})
        }
        
        render() {
          return <p>{this.state.score}</p>  
        }
      }

      ReactDOM.render(
        <App/>, document.getElementById('score')
      )
    </script>
      
  </body>
</html>